{"version":3,"sources":["app/course_list.cljc"],"mappings":";AAMA,AACA,AAEA","names":[],"sourcesContent":["(ns app.course-list\n  (:require [hyperfiddle.electric :as e]\n            [hyperfiddle.electric-dom2 :as dom]\n            [hyperfiddle.history :as router]\n            #?(:clj [datomic.client.api :as dt])))\n\n(e/def conn)\n(e/def db)\n\n(e/defn CourseList []\n        (e/server\n          (binding [conn @(requiring-resolve 'user/datomic-conn)]\n            (binding [db (dt/db conn)]\n             (e/client\n               (dom/h1 (dom/text \"Course List\"))\n               (dom/div\n                 (dom/table\n                   (dom/th (dom/text \"Name\"))\n                   (dom/th (dom/text \"Code\"))\n                   (dom/th (dom/text \"Department\"))\n                   (dom/th (dom/text \"Class\"))\n                   (dom/th (dom/text \"Instructor\"))\n                   (e/for [value (e/server (dt/q '[:find (pull ?e [*])\n                                                   :where [?e :course/id _]] db))]\n                          (dom/tr\n                            (dom/td (dom/text (:course/name (first value))))\n                            (dom/td (dom/text (:course/code (first value))))\n                            (dom/td (dom/text (e/server (map (fn [m] (ffirst (dt/q '[:find ?name\n                                                                                     :in $ ?dept-id\n                                                                                     :where [?dept-id :department/name ?name]] db (:db/id m)))) (:course/department (first value))))))\n                            (dom/td (dom/text (:course/class (first value))))\n                            (dom/td (dom/text (e/server (dt/q '[:find ?name\n                                                                :in $ ?instructor-id\n                                                                :where [?insturctor-id :instructor/name ?name]] db (:db/id (first (:course/instructor (first value)))))))))))))))))\n\n\n"]}