{"version":3,"sources":["app/student_list.cljc"],"mappings":";AAMA,AACA,AAEA","names":[],"sourcesContent":["(ns app.student-list\n  (:require [hyperfiddle.electric :as e]\n            [hyperfiddle.electric-dom2 :as dom]\n            [hyperfiddle.history :as router]\n            #?(:clj [datomic.client.api :as dt])))\n\n(e/def conn)\n(e/def db)\n\n(e/defn StudentList []\n        (e/server\n          (binding [conn @(requiring-resolve 'user/datomic-conn)]\n            (binding [db (dt/db conn)]\n             (e/client\n               (dom/text \"Student List\")\n\n               (dom/div\n                 (dom/table\n                   (dom/th (dom/text \"Name\"))\n                   (dom/th (dom/text \"Department\"))\n                   (e/for [value (e/server (dt/q '[:find (pull ?e [*])\n                                                   :where [?e :student/id _]] db))]\n                          (dom/tr\n\n                            (dom/td (dom/text (:student/name (first value))))\n                            (dom/td (dom/text (ffirst (e/server (dt/q '[:find ?name\n                                                                        :in $ ?dept-id\n                                                                        :where [?dept-id :department/name ?name]] db (:db/id (:student/department (first value)))))))))))))))))\n\n\n\n"]}