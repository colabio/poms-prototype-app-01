{"version":3,"sources":["app/poms_06_ph_20230915.cljc"],"mappings":";AAUA,AACA,AAgBA","names":[],"sourcesContent":["(ns app.poms-06-ph-20230915\n  (:require contrib.str\n            [hyperfiddle.electric :as e]\n            [hyperfiddle.electric-dom2 :as dom]\n    ;datomic require'\u0131 asag\u0131daki\n            #?(:clj [datomic.client.api :as d])\n            [hyperfiddle.electric-ui4 :as ui]\n            ))\n\n;; bu k\u0131s\u0131mda zorunlu\n(e/def conn)\n(e/def db)\n;; bu k\u0131s\u0131mda zorunlu\n\n#?(:clj (defn get-user-id-by-name [str-name db]\n          (ffirst (d/q\n                    '[:find ?id\n                      :in $ ?name\n                      :where\n                      [?e :user/name ?name]\n                      [?e :user/id ?id]\n                      ]\n                    db str-name)\n                  )\n          )\n   )\n\n(e/defn ph-page []\n        (e/server\n          (binding [conn @(requiring-resolve 'user/datomic-conn)]\n            (binding [db (d/db conn)]\n              ;bind etmek zorunday\u0131z dbyi cal\u0131st\u0131rmak i\u00e7in.\n              (e/client\n                (let [!state (atom {\n                                    :btn1-is-clicked false\n                                    :username \"\"\n                                    })\n                      username (get (e/watch !state) :username)\n                      ]\n                  (dom/element \"style\" (dom/text \"\n                  ul{list-style-type: none; margin: 0; padding: 0; background-color: black; overflow: auto; }\n                  li {float: left;}\n                  li a {color: white; padding: 15px 25px; display: inline-block; text-align: center; text-decoration: none;}\n                  .home {background-color: darkred;}\n                  li a:hover {\n                  background-color: #405d27; }\n                  table, th, td {border: 0.2px solid;}\n                  \"))\n                  (dom/ul (dom/props {:class \"ul\"})\n                          (dom/li\n                            (dom/a (dom/props {:class \"home\" :href \"http://localhost:8080/\"})\n                                   (dom/text \"Home\")))\n                          (dom/li\n                            (dom/a (dom/props {:href \"http://localhost:8080/(app.poms-00-signup-20230831!signup-page)\"})\n                                   (dom/text \"Sign Up\")))\n                          (dom/li\n                            (dom/a (dom/props {:href \"http://localhost:8080/(app.poms-01-login-20230828!login-page)\"})\n                                   (dom/text \"Log In\")))\n                          (dom/li\n                            (dom/a (dom/props {:href \"http://localhost:8080/(app.poms-02-cp-20230830!create-project)\"})\n                                   (dom/text \"Create Project\")))\n                          (dom/li\n                            (dom/a (dom/props {:href \"http://localhost:8080/(app.poms-03-crfp-20230906!create-rfp)\"})\n                                   (dom/text \"Create Rfp\")))\n                          (dom/li\n                            (dom/a (dom/props {:href \"http://localhost:8080/(app.poms-04-sif-20230907!sif-page)\"})\n                                   (dom/text \"Supplier Information Screen\")))\n                          (dom/li\n                            (dom/a (dom/props {:href \"http://localhost:8080/(app.poms-05-addcompany-20230907!add-company)\"})\n                                   (dom/text \"Add New Company\")))\n                          (dom/li\n                            (dom/a (dom/props {:href \"http://localhost:8080/(app.poms-06-ph-20230915!ph-page)\"})\n                                   (dom/text \"Project Highlights\")))\n                          (dom/li\n                            (dom/a (dom/props {:href \"http://localhost:8080/(app.poms-07-app-20230915!app-page)\"})\n                                   (dom/text \"Add New Proposal\")))\n                          (dom/li\n                            (dom/a (dom/props {:href \"http://localhost:8080/(app.poms-08-ap-20230918!approve-proposal)\"})\n                                   (dom/text \"Approve Proposal\")))\n                          (dom/li\n                            (dom/a (dom/props {:href \"http://localhost:8080/(app.poms-09-ot-20230920!operation-track-page)\"})\n                                   (dom/text \"Operation Track\")))\n                          )\n\n                  (dom/div (dom/props {:style {:float \"left\" :overflow \"auto\"}})\n                           (dom/form\n                             (dom/props {:il       \"FORM\"\n                                         :onSubmit \"false\"\n\n                                         })\n                             (dom/fieldset\n                               (dom/props {:name \"FORM\"\n                                           })\n                               (dom/legend\n                                 (dom/text \"Project Highlights\")\n                                 (dom/props {:style {:text-align \"center\"}}))\n                               (dom/p (dom/props {:style {:padding-bottom \"20px\" :margin-top \"0\" :margin-left \"35%\"}}) (dom/text \" Proje ve rfp \u00f6nizleme ekran\u0131: \"))\n                               (dom/p (dom/text \"username:\" (dom/props {:class \"text\"\n                                                                        }))\n                                      (ui/input username\n                                                (e/fn [v] (swap! !state assoc :username v))\n                                                (dom/props {:style {:name \"username\"}})\n                                                )\n                                      )\n                               (dom/div (dom/props {:style {:position \"relative\" :top \"50%\" :left \"0%\" :overflow \"auto\" :height \"600px\"}})\n                                        (dom/table\n                                          (dom/tr\n                                            (dom/th (dom/text \"General Information for\"))\n                                            (dom/th (dom/text \"Attributes\"))\n                                            (dom/th (dom/text \"Detailed Informations\"))\n                                            )\n                                          (e/for [[prj-id prj-client-user-name prj-client-company-name prj-title prj-sd prj-fd rfp-id rfp-name rfp-item-amount rfp-category rfp-explanation]\n                                                  (e/server\n                                                    (binding [conn @(requiring-resolve 'user/datomic-conn)]\n                                                      (binding [db (d/db conn)]\n                                                        (d/q\n                                                          '[:find ?pi ?un ?cn ?pt ?psd ?pfd ?rfp-id ?rfp-name ?rfp-item-amount ?rfp-category ?rfpexplanation\n                                                            :in $ ?user ?user-raw\n                                                            :where\n                                                            ;find data by user-id\n                                                            [?e :project/client-user-id ?user]\n                                                            [?e :project/id ?pi]\n                                                            ;get user-name\n                                                            [?ueid :user/id ?user-raw]\n                                                            [?ueid :user/name ?un]\n                                                            ;get client company name by using relations\n                                                            [?e :project/client-company-id ?pceid]\n                                                            [?pceid :company/id ?cid]\n                                                            [?ceid :company/id ?cid]\n                                                            [?ceid :company/brand-name ?cn]\n                                                            ;get project information data by entitiy id of ?user entry ---> [?e :project/client-user-id ?user]\n                                                            [?e :project/client-user-id ?user]\n                                                            [?e :project/project-title ?pt]\n                                                            [?e :project/project-sd ?psd]\n                                                            [?e :project/project-fd ?pfd]\n                                                            ;get rfp data by entity id of current project (rfp table's :project/id reference ---> ([?rfpe :rfp/project-id ?e]) )\n                                                            [?rfpe :rfp/project-id ?e]\n                                                            [?rfpe :rfp/id ?rfp-id]\n                                                            [?rfpe :rfp/name ?rfp-name]\n                                                            [?rfpe :rfp/item-amount ?rfp-item-amount]\n                                                            [?rfpe :rfp/category ?dbie]\n                                                            [?dbie :db/ident ?rfp-category]\n                                                            [?rfpe :rfp/explanation ?rfpexplanation]\n\n                                                            ]\n                                                          db [:user/id (get-user-id-by-name username db)] (get-user-id-by-name username db))\n                                                        )\n                                                      )\n                                                    )\n                                                  ]\n\n                                                 (dom/tr\n                                                   (dom/td (dom/props {:rowspan 5}) (dom/text \"Project: \"))\n                                                   (dom/td (dom/text \"Project Client User\"))\n                                                   (dom/td (dom/text prj-client-user-name))\n                                                   )\n                                                 (dom/tr\n                                                   (dom/td (dom/text \"Project Client Company\"))\n                                                   (dom/td (dom/text prj-client-company-name))\n                                                   )\n                                                 (dom/tr\n                                                   (dom/td (dom/text \"Project Title\"))\n                                                   (dom/td (dom/text prj-title))\n                                                   )\n                                                 (dom/tr\n                                                   (dom/td (dom/text \"Project Starting Date\"))\n                                                   (dom/td (dom/text prj-sd))\n                                                   )\n                                                 (dom/tr\n                                                   (dom/td (dom/text \"Client Conctact Info\"))\n                                                   (dom/td (dom/text prj-fd))\n                                                   )\n                                                 (dom/tr\n                                                   (dom/td (dom/props {:rowspan 5}) (dom/text \"Rfp: \"))\n                                                   (dom/td (dom/text \"RFP Id\"))\n                                                   (dom/td (dom/text rfp-id))\n                                                   )\n                                                 (dom/tr\n                                                   (dom/td (dom/text \"Name\"))\n                                                   (dom/td (dom/text rfp-name))\n                                                   )\n                                                 (dom/tr\n                                                   (dom/td (dom/text \"Item Amount\"))\n                                                   (dom/td (dom/text rfp-item-amount))\n                                                   )\n                                                 (dom/tr\n                                                   (dom/td (dom/text \"Category\"))\n                                                   (dom/td (dom/text rfp-category))\n                                                   )\n                                                 (dom/tr\n                                                   (dom/td (dom/text \"Details\"))\n                                                   (dom/td (dom/text rfp-explanation))\n                                                   )\n                                                 )\n                                          )\n\n                                        )\n\n                               (dom/div (dom/props {:style {:float \"left\" :margin \"auto\" :padding-top \"20px\" :position \"relative\" :left \"25%\"}})\n                                        (dom/button\n                                          (dom/on \"click\" #(.alert js/window \"Project Successfully Created!!\"))\n                                          (dom/text \"Proje Baslat\")\n                                          (dom/props {:type  \"button\"\n                                                      :class \"button1\"\n                                                      :name  \"login-button\"\n                                                      :style {:text-align \"center\" :margin-left \"0\"}\n                                                      })\n                                          )\n                                        )\n\n                               )\n                             )\n                           )\n\n                  )\n                )\n              )\n            )\n          )\n        )"]}