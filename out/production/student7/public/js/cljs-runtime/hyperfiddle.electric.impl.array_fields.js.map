{"version":3,"sources":["hyperfiddle/electric/impl/array_fields.cljc"],"mappings":"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","names":["var_args","G__47670","hyperfiddle.electric.impl.array-fields/swap","args-arr__5794__auto__","len__5769__auto__","i__5770__auto__","argseq__5795__auto__","cljs.core/IndexedSeq","seq47662","G__47663","cljs.core/first","cljs.core/next","G__47664","G__47665","G__47666","G__47667","G__47668","self__5754__auto__","a","k","f","G__47677","x","G__47679","G__47680","y","G__47685","G__47686","G__47687","z","G__47690","G__47691","G__47692","G__47693","more","cljs.core.apply","hyperfiddle.electric.impl.array-fields/get","hyperfiddle.electric.impl.array-fields/getset","v","ret","hyperfiddle.electric.impl.array-fields/getswap","hyperfiddle.electric.impl.array_fields.swap","this__5330__auto__","writer__5331__auto__","opt__5332__auto__","cljs.core/-write","hyperfiddle.electric.impl.array-fields/P","hyperfiddle.electric.impl.array-fields/->P","state-","hyperfiddle.electric.impl.array-fields/generated__hyperfiddle_electric_impl_array_fields_31","js/hyperfiddle","js/hyperfiddle.electric","js/hyperfiddle.electric.impl","js/hyperfiddle.electric.impl.array-fields","js/hyperfiddle.electric.impl.array-fields.t_hyperfiddle$electric$impl$array_fields48390","hyperfiddle.electric.impl.array-fields/t_hyperfiddle$electric$impl$array_fields48390","_48392","meta48391","cljs.core/PROTOCOL_SENTINEL","unused__14959__auto__","self__","G__48401","js/Error","args48397","cljs.core/aclone","done-48317","___14619__auto__","RCF__done!","hyperfiddle.rcf/async-notifier","values__10703__auto__","cljs.core/List","arr48038","cljs.core/identity","result__10704__auto__","hyperfiddle.rcf/=","cljs.test/do-report","cljs.core/cons","t__10691__auto__","e48422","e48427","e48429","e48438","e48443","e48456","e48457","e48460","e48461","hyperfiddle.electric.impl.array-fields/->t_hyperfiddle$electric$impl$array_fields48390","hyperfiddle.rcf/*enabled*","cljs.test/run-block","cljs.test/test-var-block*","hyperfiddle.electric.impl.array-fields/x","hyperfiddle.electric.impl.array-fields/y","hyperfiddle.electric.impl.array-fields/aP","cljs.core.object_array","aP","cljs.core/inc"],"sourcesContent":["(ns hyperfiddle.electric.impl.array-fields\n  (:refer-clojure :exclude [get set])\n  #?(:cljs (:require-macros hyperfiddle.electric.impl.array-fields))\n  (:require [hyperfiddle.rcf :as rcf :refer [tests]]))\n;; #?(:clj (set! *warn-on-reflection* true))\n(defmacro deffields [& fields]\n  `(do ~@(for [[fld idx] (mapv vector fields (range))]\n           `(def ~fld (int ~idx)))))\n(defn swap\n  ([^objects a k f] (aset a k (f (aget a k))))\n  ([^objects a k f x] (aset a k (f (aget a k) x)))\n  ([^objects a k f x y] (aset a k (f (aget a k) x y)))\n  ([^objects a k f x y z] (aset a k (f (aget a k) x y z)))\n  ([^objects a k f x y z & more] (aset a k (apply f (aget a k) x y z more))))\n(defmacro fswap [O k f & args] `(swap (.-state- ~O) ~k ~f ~@args))\n(defn get [^objects a k] (aget a k))\n(defmacro fget [O k] `(get (.-state- ~O) ~k))\n(defmacro set [arr & kvs]\n  (let [ar (with-meta (gensym \"arr\") {:tag 'objects})]\n    `(let [~ar ~arr]\n       ~@(for [[k v] (partition 2 kvs)]\n           ;; FIXME better way to fix reflection warning than call `identity`?\n           `(aset ~ar ~k (identity ~v))))))\n(defmacro fset [O & kvs] `(set (.-state- ~O) ~@kvs))\n(defn getset [^objects a k v] (let [ret (aget a k)] (aset a k v) ret))\n(defmacro fgetset [O k v] `(getset (.-state- ~O) ~k ~v))\n(defn getswap [^objects a k f] (let [ret (aget a k)] (swap a k f) ret))\n\n;;; TESTS ;;;\n(deftype P [state-])\n(tests\n  (deffields x y)\n  (def aP (->P (object-array 2)))\n  (let [^P aP aP]\n    (fset aP x 1 y 2)            := 2\n    [(fget aP x) (fget aP y)]    := [1 2]\n    (fswap aP x inc)             := 2\n    (swap (.-state- aP) x inc)   := 3\n    (fgetset aP x 0)             := 3\n    (getset (.-state- aP) x 100) := 0\n    (fget aP x)                  := 100\n    (getswap (.-state- aP) x inc) := 100\n    (fget aP x)                   := 101\n    ))\n"]}